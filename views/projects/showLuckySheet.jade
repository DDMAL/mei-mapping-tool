doctype html
html
  include includes/projectHead.jade

//Header parameters
   //Column parameters
//- - each user in users
include includes/projectHeader.jade
include includes/projectNav.jade

//Title section : Adding a neume button and changing the title name 
               
div.neumeSection(style = "display: block; top : 170px; position: relative; min-height: calc(100% - 170px)" id="neume-sheet")
  div.neume-table-header
    div(style="max-width: 100px;")
      b Image
    div
      b Name
    div 
      b Generic Name
    div 
      b Folio
    div 
      b Description
    div 
      b Classification
    div.mei-header 
      b MEI Encoding
  - each neume in neumes
    div.neume-row
      div.image-wrap
        if neume.imagesBinary[0]
          img(src="data:image/jpeg;base64,#{neume.imagesBinary[0]}")
      input(type='text', value='#{neume.name}', name='name', id="neume-name_#{neume.id}", class="name")
      input(type='text', value='#{neume.genericName}', name='generic-name', id="generic-name_#{neume.id}", class="genericName")
      input(type='text', value='#{neume.folio}', name='folio', id="folio_#{neume.id}", class="folio")
      input(type='text', value='#{neume.description}', name='description', id="description_#{neume.id}", class="description")
      input(type='text', value='#{neume.classification}', name='classification', id="classification_#{neume.id}", class="classification")
      div(name='mei', id = 'mei_#{neume.id}', class='mei') #{neume.mei}


//- script(src"/javascripts/require.js", type="text/javascript")
script(src='/ace-builds/src-noconflict/ace.js', type='text/javascript', charset="utf-8")
script(src="/socket.io/socket.io.js", type="text/javascript")
script(src="https://code.jquery.com/jquery-3.6.0.min.js", type="text/javascript")
script. 
  const socket = io();
  $('.mei').each((i, obj) => {
    console.log(obj.id)
    var editor = ace.edit(obj.id);
    //- editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/xml");
    editor.session.on('change', () => {
      socket.emit('neume edit', [editor.session.getValue(), obj.id, 'mei'])
    })
  })
  
  
  $('.neumeSection input').on('input', function(e) {
    e.preventDefault();
    socket.emit('neume edit', [$(this).val(), $(this).attr('id'), $(this).attr('class')]);
  })

  

//- script(src='/javascripts/projectSheet.js') 
script(src='//www.termsfeed.com/cookie-consent/releases/3.0.0/cookie-consent.js')

script.

  document.addEventListener('DOMContentLoaded', function () {
  cookieconsent.run({"notice_banner_type":"interstitial","consent_type":"express","palette":"light","change_preferences_selector":"#changePreferences","language":"en","website_name":"Cress"});
  });
  insertAfter(document.getElementById("section"), document.getElementById("roundedCorners"));
  function insertAfter(newNode, referenceNode) {
    referenceNode.parentNode.insertBefore(newNode, referenceNode.nextSibling);
  }
   var neumeArray = [];
<noscript>Cookie Consent by <a href="https://www.termsfeed.com/">TermsFeed</a></noscript>
<!-- End Cookie Consent -->                                          
                                       
